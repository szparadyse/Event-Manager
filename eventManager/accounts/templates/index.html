{% extends 'base.html' %} {% block title %}Accueil - Event Manager{% endblock %}
{% block content %}
<div class="min-h-full">
  <!-- Navigation -->
  <nav class="bg-white shadow-sm border-b border-gray-200">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 justify-between">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <h1 class="text-xl font-bold text-gray-900">Event Manager</h1>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <div class="flex items-center space-x-2">
            <div
              class="h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center"
            >
              <span class="text-sm font-medium text-white"
                >{{ user.username|first|upper }}</span
              >
            </div>
            <span class="text-sm font-medium text-gray-700"
              >{{ user.username }}</span
            >
          </div>
          <form
            method="post"
            action="{% url 'accounts:logout' %}"
            class="inline"
          >
            {% csrf_token %}
            <button
              type="submit"
              class="inline-flex items-center rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200"
            >
              <svg
                class="mr-2 h-4 w-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                ></path>
              </svg>
              Se d√©connecter
            </button>
          </form>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main content -->
  <main class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
    <!-- Welcome section -->
    <div class="mb-8">
      <div
        class="rounded-2xl bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white"
      >
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <div
              class="h-12 w-12 rounded-full bg-white/20 flex items-center justify-center"
            >
              <svg
                class="h-6 w-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
                ></path>
              </svg>
            </div>
          </div>
          <div class="ml-4">
            <h1 class="text-2xl font-bold">
              Bienvenue, {{ user.username }} ! üëã
            </h1>
            <p class="mt-1 text-blue-100">
              Vous √™tes connect√© √† votre tableau de bord Event Manager.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Dashboard cards -->
    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <!-- Events card -->
      <div
        class="overflow-hidden rounded-xl bg-white shadow-sm ring-1 ring-gray-900/5"
      >
        <div class="p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div
                class="h-10 w-10 rounded-lg bg-green-100 flex items-center justify-center"
              >
                <svg
                  class="h-6 w-6 text-green-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
              </div>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-900">
                Mes √âv√©nements
              </h3>
              <p class="text-sm text-gray-500">G√©rez vos √©v√©nements</p>
            </div>
          </div>
          <div class="mt-4">
            <button
              class="w-full rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200"
            >
              Voir les √©v√©nements
            </button>
          </div>
        </div>
      </div>

      <!-- Create event card -->
      <div
        class="overflow-hidden rounded-xl bg-white shadow-sm ring-1 ring-gray-900/5"
      >
        <div class="p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div
                class="h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center"
              >
                <svg
                  class="h-6 w-6 text-blue-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  ></path>
                </svg>
              </div>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-900">
                Cr√©er un √âv√©nement
              </h3>
              <p class="text-sm text-gray-500">Organisez un nouvel √©v√©nement</p>
            </div>
          </div>
          <div class="mt-4">
            <button
              type="button"
              class="w-full rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200"
              onclick="openModal()"
            >
              Cr√©er un √©v√©nement
            </button>
          </div>
        </div>
      </div>

      <!-- Profile card -->
      <div
        class="overflow-hidden rounded-xl bg-white shadow-sm ring-1 ring-gray-900/5"
      >
        <div class="p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div
                class="h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center"
              >
                <svg
                  class="h-6 w-6 text-purple-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  ></path>
                </svg>
              </div>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-900">Mon Profil</h3>
              <p class="text-sm text-gray-500">G√©rez vos informations</p>
            </div>
          </div>
          <div class="mt-4">
            <button
              class="w-full rounded-lg bg-purple-600 px-4 py-2 text-sm font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors duration-200"
            >
              Modifier le profil
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent activity section -->
    <div class="mt-8">
      <div
        class="overflow-hidden rounded-xl bg-white shadow-sm ring-1 ring-gray-900/5"
      >
        <div class="px-6 py-4 border-b border-gray-200">
          <h2 class="text-lg font-semibold text-gray-900">Activit√© r√©cente</h2>
        </div>
        <div class="p-6">
          {% if events %}
          <ul role="list" class="divide-y divide-gray-200">
            {% for event in events %}
            <li class="py-3 flex items-center justify-between">
              <div class="min-w-0">
                <p class="text-sm font-medium text-gray-900">{{ event.title }}</p>
                <p class="text-sm text-gray-500">
                  {{ event.date|date:"d/m/Y H:i" }} ‚Ä¢ {{ event.location }} ‚Ä¢ {{ event.category.name }}
                </p>
              </div>
              <a
                href="{% url 'accounts:event_details' event.id %}"
                class="inline-flex items-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
              >
                D√©tail
              </a>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <div class="text-center py-8">
            <svg
              class="mx-auto h-12 w-12 text-gray-400"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
              ></path>
            </svg>
            <h3 class="mt-2 text-sm font-medium text-gray-900">
              Aucune activit√© r√©cente
            </h3>
            <p class="mt-1 text-sm text-gray-500">
              Commencez par cr√©er votre premier √©v√©nement.
            </p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </main>
</div>

<dialog
  id="eventModal"
  class="p-0 rounded-xl shadow-lg max-w-lg w-[90vw]"
  style="border: none"
>
  <div class="flex flex-col items-stretch">
    <form method="dialog" class="flex justify-end">
      <button
        type="button"
        onclick="closeModal()"
        class="text-2xl text-gray-400 hover:text-gray-600 px-4 py-2"
        aria-label="Fermer"
      >
        &times;
      </button>
    </form>
    <form
      method="post"
      enctype="multipart/form-data"
      action="{% url 'accounts:add_event' %}"
      class="p-6 pt-0"
    >
      {% csrf_token %}
      <div class="mb-4">
        <label for="title" class="block text-sm font-medium text-gray-700"
          >Titre</label
        >
        <input
          type="text"
          name="title"
          id="title"
          required
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
        />
      </div>
      <div class="mb-4">
        <label for="description" class="block text-sm font-medium text-gray-700"
          >Description</label
        >
        <textarea
          name="description"
          id="description"
          required
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
        ></textarea>
      </div>
      <div class="mb-4">
        <label for="category" class="block text-sm font-medium text-gray-700"
          >Cat√©gorie</label
        >
        <select
          name="category"
          id="category"
          required
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
        >
          {% for category in categories %}
          <option value="{{ category.id }}">{{ category.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="mb-4">
        <label for="date" class="block text-sm font-medium text-gray-700"
          >Date et heure</label
        >
        <input
          type="datetime-local"
          name="date"
          id="date"
          required
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
        />
      </div>
      <div class="mb-4">
        <label for="places" class="block text-sm font-medium text-gray-700"
          >Nombre de places</label
        >
        <input
          type="number"
          name="places"
          id="places"
          required
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
        />
      </div>
      <div class="mb-4">
        <label for="location" class="block text-sm font-medium text-gray-700"
          >Lieu</label
        >
        <input
          type="text"
          name="location"
          id="location"
          required
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
        />
      </div>
      <div class="mb-4">
      <label for="image" class="block text-sm font-medium text-gray-700">
        Image
      </label>
      <input
        type="file"
        name="image"
        id="image"
        accept="image/*"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
      />
      </div>

      <button
        type="submit"
        class="w-full rounded-lg bg-blue-600 px-4 py-2 text-white font-medium hover:bg-blue-700"
      >
        Cr√©er
      </button>
    </form>
  </div>
</dialog>

<style>
  #eventModal[open] {
    position: fixed;
    inset: 50% auto auto 50%;
    transform: translate(-50%, -50%);
    margin: 0;
    padding: 0;
  }
  #eventModal::backdrop {
    background: rgba(0, 0, 0, 0.4);
  }
</style>
{% endblock %} {% block scripts %}
<script>
  function openModal() {
    document.getElementById("eventModal").showModal();
  }
  function closeModal() {
    document.getElementById("eventModal").close();
  }
</script>

{% endblock %}
